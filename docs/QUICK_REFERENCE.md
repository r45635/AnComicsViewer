# AnComicsViewer - Quick Reference

## ğŸš€ Quick Start

```bash
# 1. One-command setup
./setup.sh

# 2. Start application
source .venv/bin/activate
python AnComicsViewer.py
```

## ğŸ“± Application Controls

| Action | Shortcut | Button |
|--------|----------|--------|
| Open PDF | `Ctrl+O` | ğŸ“‚ |
| Toggle panels | `Ctrl+2` | â–¦ |
| Next panel | `N` | â–¶ |
| Previous panel | `Shift+N` | â—€ |
| Zoom in | `Ctrl++` | ğŸ”+ |
| Zoom out | `Ctrl+-` | ğŸ”- |
| Fit width | `Ctrl+1` | ğŸ“ |
| Fit page | `Ctrl+0` | ğŸ— |

## âš™ï¸ Settings Menu

| Feature | Path |
|---------|------|
| Debug logs | âš™ï¸ â†’ Debug logs |
| Presets | âš™ï¸ â†’ Presets â†’ Franco-Belge/Manga/Newspaper |
| Detection DPI | âš™ï¸ â†’ Detection DPI: 150/200 |
| Detector switch | âš™ï¸ â†’ Detector â†’ Heuristic/YOLOv8 |
| Load ML weights | âš™ï¸ â†’ Detector â†’ Load ML weights... |
| Advanced tuning | âš™ï¸ â†’ Advanced tuning... |

## ğŸ¤– ML Detector

```bash
# 1. Load weights in app: âš™ï¸ â†’ Detector â†’ Load ML weights...
# 2. Switch to ML: âš™ï¸ â†’ Detector â†’ YOLOv8 Seg (ML)
# 3. Test detection with panel overlay (Ctrl+2)
```

## ğŸ“Š Dataset Creation

```bash
# Extract PDF pages
python tools/export_pdf_pages.py "comic.pdf" --out dataset/images/train --dpi 300

# Create train/val split (auto-generated by setup)
# Results in ~90% train, ~10% validation

# Start annotation
python start_annotation.py

# Convert annotations to YOLO
python post_annotation_processing.py
```

## ğŸ¯ Training

```bash
# Train YOLOv8 model
yolo segment train model=yolov8n-seg.pt data=ml/dataset.yaml imgsz=1280

# Use trained model in app
# âš™ï¸ â†’ Detector â†’ Load ML weights... â†’ select your trained .pt file
```

## ğŸ›  VS Code Tasks

| Task | Command |
|------|---------|
| Run App | `Ctrl+Shift+P` â†’ Tasks: Run Task â†’ Run App |
| Debug | `F5` (Run ComicsView) |
| Extract Pages | `Ctrl+Shift+P` â†’ Tasks: Run Task â†’ Export Pages |
| Train YOLO | `Ctrl+Shift+P` â†’ Tasks: Run Task â†’ YOLO Train |

## ğŸ› Troubleshooting

| Issue | Solution |
|-------|----------|
| Qt plugin errors (macOS) | `export QT_MAC_WANTS_LAYER=1` |
| PDF won't load | `chmod 644 "file.pdf"` |
| ML model won't load | Already fixed in code (PyTorch compatibility) |
| Slow detection | Lower DPI (150), use presets |

## ğŸ“ Key Files

| File | Purpose |
|------|---------|
| `AnComicsViewer.py` | Main application |
| `README_SETUP.md` | Complete setup guide |
| `setup.sh` | Automated setup script |
| `start_annotation.py` | Launch annotation tool |
| `post_annotation_processing.py` | Convert annotations |
| `.vscode/tasks.json` | VS Code build tasks |
| `ml/dataset.yaml` | YOLO training config |

## ğŸ’¡ Tips

- **Franco-Belge preset**: Best for traditional European comics
- **Manga preset**: Optimized for Japanese comics (RTL)
- **Detection DPI 200**: Higher quality, slower
- **Detection DPI 150**: Faster, good quality
- **Panel navigation**: Use N/Shift+N for efficient reading
- **Advanced tuning**: Real-time parameter adjustment

## ğŸ¨ Comic Formats Tested

| Format | Preset | Notes |
|--------|--------|-------|
| Franco-Belgian BD | Franco-Belge | Golden City, Tintin, etc. |
| Manga | Manga | Right-to-left reading |
| American Comics | Franco-Belge | Usually works well |
| Newspaper Strips | Newspaper | Horizontal layouts |

---

ğŸ“– **For complete documentation**: See `README_SETUP.md`  
ğŸ”§ **For ML details**: See `ml/README-ml.md`  
ğŸ†˜ **For issues**: Check troubleshooting section above
